<div class="introduction">
  <a class="introduction__logo-container" target="_blank" href="//www.google.com/trends/">
    <md-button class="md-fab md-mini" aria-label="Back to Google Trends" class="introduction__logo-container__arrow">
      <md-icon md-svg-src="assets/images/arrow_back.svg"></md-icon>
    </md-button>
    <md-icon md-svg-src="assets/images/google.svg" aria-label="Google" class="introduction__logo-container__google"></md-icon>
    <h1 class="introduction__logo-container__trends">Trends</h1>
  </a>
  <div class="container">
    <h2>Data from Google</h2>
    <p class="lead text-muted">This tool helps you to quickly arrange several iframes together.</p>
  </div>
</div>
<div class="container">
  <div class="row editor">
    <div class="col-md-4">
      <div class="panel editor__step panel-default">
        <div class="editor__step__label"></div>
        <form class="panel-body" name="addUrlForm" role="form" ng-submit="addUrl()">
          <div class="input-group">
            <input type="text" required ui-validate="{ isUrl: 'isUrlValid($value)' }" name="newUrl" ng-model="newUrl" class="form-control" placeholder="An URL or an iframe code" />
            <span class="input-group-btn">
              <button class="btn btn-primary" ng-disabled="!addUrlForm.$valid" type="submit" tooltip="Create an iframe with this URL">
                Add
              </button>
            </span>
          </div>
          <div ng-show="addUrlForm.newUrl.$error.isUrl && !addUrlForm.newUrl.$error.required" class="editor__step__error text-danger small">
            This is not a valid URL or iframe.
          </div>
        </form>
        <ul class="list-group" ui-sortable ng-model="settings.urls">
          <li class="list-group-item editor__step__url" ng-repeat="url in settings.urls track by $index">
            <div>
              <div class="btn-group btn-group-xs pull-right editor__step__url__actions">
                <button type="button" class="btn btn-default" tooltip="Change the label describing this iframe" ng-click="editLabel($index)">
                  Edit label
                </button>
                <button type="button" class="btn btn-default" ng-click="removeUrl($index)" tooltip="Remove this iframe">
                  <i class="glyphicon glyphicon-trash"></i>
                </button>
                <span class="btn btn-default">
                  <i class="glyphicon glyphicon-move"></i>
                </span>
              </div>
              <a ng-href="{{scaffolder.url($index, true)}}" target="_blank" class="editor__step__url__value">
                {{scaffolder.label($index)}}
              </a>
            </div>
            <form ng-submit="saveLabel($index)" ng-show="!!labels[$index] || labels[$index] === ''" class="editor__step__url__edit-label">
              <div class="input-group input-group-sm">
                <input type="text" ng-model="labels[$index]" class="form-control" />
                <span class="input-group-btn">
                  <button class="btn btn-default" type="submit">
                    Save
                  </button>
                </span>
              </div>
            </form>
          </li>
        </ul>
      </div>
      <div class="panel editor__step panel-default" ng-class="{ 'editor__step--disable': !settings.urls.length }">
        <div class="editor__step__label"></div>
        <div class="panel-body">
          <p>
            Choose a layout&nbsp;
            <small class="text-muted">(how iframes are arranged)</small>
          </p>
          <div class="text-center btn-group">
            <button class="btn btn-default btn-sm" ng-class="{active: settings.layout == 'menu'}" ng-click="settings.layout = 'menu'" tooltip="Toggle iframes using a menu">
              ≡◻
            </button>
            <button class="btn btn-default btn-sm" ng-class="{active: settings.layout == 'narrative'}" ng-click="settings.layout = 'narrative'" tooltip="Toggle iframes using next and previous buttons">
              ⍃ ⍄
            </button>
            <button class="btn btn-default btn-sm" ng-class="{active: settings.layout == 'tabs'}" ng-click="settings.layout = 'tabs'" tooltip="Toggle iframes using tabs">
              ⎍⎍
            </button>
            <button class="btn btn-default btn-sm" ng-class="{active: settings.layout == 'horizontal'}" ng-click="settings.layout = 'horizontal'" tooltip="All iframes have equal width">
              ▯▯▯
            </button>
            <button class="btn btn-default btn-sm" ng-class="{active: settings.layout == 'head'}" ng-click="settings.layout = 'head'" tooltip="The first iframe use half of the screen, the others a stacked">
              ▯▤
            </button>
            <button class="btn btn-default btn-sm" ng-class="{active: settings.layout == 'tail'}" ng-click="settings.layout = 'tail'" tooltip="The last iframe use half of the screen, the others a stacked">
              ▤▯
            </button>

          </div>
        </div>
      </div>
      <div class="panel editor__step panel-default" ng-class="{ 'editor__step--disable': !settings.urls.length }">
        <div class="editor__step__label"></div>
        <div class="panel-body">
          <div class="pull-right" dropdown>
            <span class="btn-group">
              <i class="scaffolder--{{settings.theme}}__preview editor__step__theme-preview disabled btn btn-xs"></i>
              <button class="btn btn-default btn-xs" dropdown-toggle>
                {{ getTheme(settings.theme).label }} &nbsp;<i class="caret"></i>
              </button>
            </span>
            <ul class="dropdown-menu" role="menu">
              <li ng-repeat="theme in themes" class="editor__step__theme">
                <a ng-click="settings.theme = theme.slug">
                  <i class="scaffolder--{{theme.slug}}__preview editor__step__theme__preview"></i>
                  {{theme.label}}
                </a>
              </li>
            </ul>
          </div>
          Choose a theme&nbsp;
        </div>
      </div>
      <div class="panel editor__step panel-default" ng-class="{ 'editor__step--disable': !settings.urls.length }">
        <div class="editor__step__label"></div>
        <div class="panel-body form-horizontal">
          <div class="form-group">
            <label for="input-title" class="control-label col-sm-4">Choose a title</label>
            <div class="col-sm-8">
              <input type="text" class="form-control" ng-model="settings.title" id="input-title">
            </div>
          </div>
          <div class="form-group editor__step__last-group">
            <label for="input-description" class="control-label col-sm-4">Describe</label>
            <div class="col-sm-8">
              <textarea class="form-control" ng-model="settings.description" id="input-description"></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="panel editor__step panel-default" ng-class="{ 'editor__step--disable': !settings.urls.length }">
        <div class="editor__step__label"></div>
        <div class="panel-body">
          <p>
            <button class="btn btn-primary btn-xs pull-right" ui-zeroclip zeroclip-model="getViewIframe()" title="Copy the embed code to you clipboard.">
              Copy
            </button>
            Export the iframe
          </p>
          <p>
            <textarea class="form-control" readonly>{{getViewIframe()}}</textarea>
          </p>
          <div class="">
            <div class="pull-left editor__step__iframe-label">
              <strong>Change the size&nbsp;</strong><br />
              <label class="editor__step__iframe-label__fluid">
                <input type="checkbox" ng-model="useFluid" />
                Use a fluid width
              </label>
            </div>
            <div class="text-right editor__step__iframe-size">
              <input type="number" ng-disabled="useFluid" ng-model="width" min="50" class="form-control input-sm editor__step__iframe-size__size" />
              x
              <input type="number" ng-model="height" min="50" class="form-control input-sm editor__step__iframe-size__size" />
            </div>
          </div>
        </div>
      </div>
      <div class="text-muted small editor__credits hidden-xs hidden-sm"></div>
    </div>
    <div class="col-md-8">
      <div class="panel panel-default editor__preview">
        <div class="editor__preview__empty-alert" ng-hide="settings.urls.length">
          <div class="lead editor__preview__empty-alert__message">
            <p>
              Add an iframe's URL on the <span class="hidden-sm hidden-xs">left&nbsp;</span>panel to preview the mosaic here.
            </p>
            <p>
              <a ng-click="pickExample()" class="btn btn-link" ng-show="examples.length">
                See an example.
              </a>
              {{example}}
            </p>
          </div>
        </div>
        <div class="panel-heading">
          <div class="input-group">
            <input class="form-control" type="text" value="{{getViewUrl()}}" readonly />
            <span class="input-group-btn">
              <a class="btn btn-link" href="{{getViewUrl()}}" target="_blank" tooltip="Open the iframe in a new window">
                <i class="glyphicon glyphicon-new-window"></i>
              </a>
              <a class="btn btn-link" tooltip="Fork this mosaic" ui-sref="fork(getViewParams())">
                <i class="glyphicon glyphicon-edit"></i>
              </a>
            </span>
          </div>
        </div>
        <div class="editor__preview__scaffolder">
          <scaffolder urls="settings.urls" iframe-layout="settings.layout" theme="settings.theme"  title="settings.title" description="settings.description" />
        </div>
      </div>
      <div class="editor__credits text-right">
        Forked from <a href="https://github.com/pirhoo/iframe-scaffolder" target="_blank">Iframe Scaffolder</a> by <a href="http://jplusplus.org" target="_blank">Journalism++</a>
      </div>
    </div>
  </div>
</div>
